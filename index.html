
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Strava Activities</title>

</head>
<body>
  <h1>Strava Activities</h1>
  
<button onclick="connectStrava()">Connect Strava</button>
<button onclick="getActivities()">Get My Rides</button>
<div id="status">Loading...</div>

<script>
const DOMAIN = 'my-strava-lay6.vercel.app';  // Your Vercel domain
const CLIENT_ID = '180222';

function connectStrava() {
  const authUrl = `https://www.strava.com/oauth/authorize?client_id=${CLIENT_ID}&redirect_uri=https://${DOMAIN}/api/callback&response_type=code&scope=read,activity:read_all&approval_prompt=force`;
  window.location.href = authUrl;
}

function updateStatus() {
  const connected = localStorage.getItem('strava_connected') === '1';
  document.getElementById('status').textContent = connected ? 'âœ… Connected!' : 'Click Connect';
}

async function getActivities() {
  const token = localStorage.getItem('strava_token');
  if (!token) return alert('Connect first!');
  
  const res = await fetch('https://www.strava.com/api/v3/athlete/activities?per_page=5', {
    headers: { Authorization: `Bearer ${token}` }
  });
  const rides = await res.json();
  document.getElementById('status').innerHTML = `<pre>${JSON.stringify(rides[0], null, 2)}</pre>`;
}

// Load status
updateStatus();
</script>

</body>

</html>
